
<% layout('layouts/boilerplate') %>

<h1 class="text-center mt-3">ðŸš€ Your Dashboard ðŸš€</h1>
<div class="justify-content-center text-center rounded shadow p-3 m-2" style="background-color:rgb(6, 18, 37); color: white;">
  <h1 class="title">Your Stats</h1>
  <div class="grid text-center" style="--bs-gap: .25rem 1rem;">
    <div class="snippet"><b>Total Concepts added: </b> <%= questions.length %> </div>
    <div class="g-col-6"><b>Total Questions answered:</b> <%= answered %> </div>
    <div class="g-col-6">Total Score: <%= score %> </div>
    <div class="g-col-6">Correctness: <%= correctness %>%</div>
</div>
<hr>
<h3>Quiz of the Day</h3>
<div class="d-flex justify-content-center">

  <form style="background-color:rgb(6, 18, 37); color: white;" class="p-3 rounded shadow" method="post" action="/dashboard">
    <div class="mb-3">
      <p><%=displayQuestion %></p>
    </div>
    <label>Choose the correct answer</label>
    <div class="mb-3 form-check">
      <input type="checkbox" class="form-check-input" id="option1">
      <label class="form-check-label" for="exampleCheck1"><%=option1 %></label>
    </div>
    <div class="mb-3 form-check">
      <input type="checkbox" class="form-check-input" id="option2">
      <label class="form-check-label" for="exampleCheck1"><%=option2 %></label>
    </div>
    <div class="mb-3 form-check">
      <input type="checkbox" class="form-check-input" id="option3">
      <label class="form-check-label" for="exampleCheck1"><%=option3 %></label>
    </div>
    <div class="mb-3 form-check">
      <input type="checkbox" class="form-check-input" id="option4">
      <label class="form-check-label" for="exampleCheck1"><%=option4 %></label>
    </div>
    <button type="submit" class="btn btn-light">Submit</button>
  </form>
  </div>
</div>
<div class="d-flex justify-content-center">
  <div class="d-flex justify-content-center">
    <form id="quizForm" style="background-color:rgb(6, 18, 37); color: white;" class="p-3 rounded shadow">
      <h3 class="text-center">Get More Practice</h3>
      <div class="d-flex justify-content-center">
      <img class="img-fluid text-center rounded shadow mb-3" src="owl.jpg" style="height: 200px; width: auto;">  
    </div>

      <div class="mb-3">
      <select class="form-select" aria-label="Default select example">
        <option selected>Pick a topic, choose your own adventure</option>
        <option value="oop">OOP</option>
        <option value="callbacks">Callbacks</option>
        <option value="closures">Closures</option>
        <option value="recursion">Recursion</option>
        <option value="async">Asynchronous</option>
      </select>
    </div>
    <div id="difficulty level" class="form-text text-center mb-2" style="color: white;">Up for a challenge?</div>
    <div class="mb-3">
      <select class="form-select" aria-label="Default select example">
        <option selected>Choose your level of difficulty</option>
        <option value="easy">Easy</option>
        <option value="moderate">Moderate</option>
        <option value="difficult">Difficult</option>
      </select>
    </div>
    <div id="difficulty level" class="form-text text-center mb-2" style="color: white;">Alright! ðŸ™Œ</div>
      <div class="d-flex justify-content-center">
        <button id="getQuestions" type="submit" class="btn btn-light">Test my knowledge</button>
      </div>
    </form>
    </div>
    </div>
    <div class="justify-content-center text-center rounded shadow m-3" style="background-color:rgb(6, 18, 37); color: white;" id="knowledge">
      <h2 class="knowledgeTitle">All of your questions</h2>
      <% if (questions) { %>
        <% questions.forEach(question => { %>
          <h3 style="color: green"><%= question %></h3>
        <% }) %>
      <% } else { %>
        <p>Nothing to see here</p>
      <% } %>
    
      <!-- <p>When you select the questions you want to study your options will be displayed below</p> -->
    </br>
      <div id="dataContainer" class="m-2"></div>
  
      </div>
      <div class="modal-body">
        <h2 class="fs-5">Popover in a modal</h2>
        <p>This <button class="btn btn-secondary" data-bs-toggle="popover" title="Popover title" data-bs-content="Popover body content is set in this attribute.">button</button> triggers a popover on click.</p>
        <hr>
        <h2 class="fs-5">Tooltips in a modal</h2>
        <p><a href="#" data-bs-toggle="tooltip" title="Tooltip">This link</a> and <a href="#" data-bs-toggle="tooltip" title="Tooltip">that link</a> have tooltips on hover.</p>
      </div>

<%- include('./partials/footer.ejs') %>
<!-- 
<script>
  let counter = 0
  const onlyOnce = document.getElementById('getQuestions')
  const container = document.getElementById('dataContainer')
  onlyOnce.addEventListener('submit', () => {
      counter++
      if (counter > 1){
        container.textContent = "Loading more questions"
      }
  });
  const form = document.getElementById('quizForm');
  form.addEventListener('submit', async (event) => {
    event.preventDefault();
    try {
      const response = await fetch('https://sheetdb.io/api/v1/78uve0w4nrmgo')
      const data = await response.json()
      console.log(data.id)
      const userData = []
      const username = "poppy"
      if (data.includes(username)){
        userData.push(data.username)
        console.log(userData)
      }
      data.forEach((row, index) => {
        console.log(`Row number: ${index}`)
        const paragraph = document.createElement('p')
        const button = document.createElement('button')

        paragraph.setAttribute('style', 'display: block;')
        paragraph.setAttribute('class', 'mb-2')
        paragraph.textContent = JSON.stringify(row.question)

        button.setAttribute('class', 'btn btn-light ms-4 mb-2')
        button.setAttribute('id', index + 1)
        button.textContent = "Try"

        button.addEventListener('click', () => {
          alert(button.id)
        })

        container.appendChild(paragraph)
        paragraph.appendChild(button)
     
      })
    }
    catch (error){
      console.log('Error fetching data: ', error)
    }
  });

  function getForm(dataRow){

  }
</script> -->

<script src="static/dashboard.js"></script>
